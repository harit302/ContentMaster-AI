from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import CallbackContext

async def start_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /start - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    user = update.effective_user
    
    keyboard = [
        [InlineKeyboardButton("üìù –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç", callback_data="text")],
        [InlineKeyboardButton("üñºÔ∏è –°–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", callback_data="image")],
        [InlineKeyboardButton("‚úèÔ∏è –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç", callback_data="rewrite")],
        [InlineKeyboardButton("üí° –ò–¥–µ–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞", callback_data="ideas")],
        [InlineKeyboardButton("‚≠ê –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞", callback_data="premium")],
        [InlineKeyboardButton("üìä –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å", callback_data="profile")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    welcome_text = f"""
ü§ñ *–ü—Ä–∏–≤–µ—Ç, {user.first_name}!* –Ø ContentMaster AI ‚Äî —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞!

‚ú® *–ß—Ç–æ —è —É–º–µ—é:*
‚Ä¢ üìù –ü–∏—Å–∞—Ç—å —Å—Ç–∞—Ç—å–∏, –ø–æ—Å—Ç—ã, —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚Ä¢ üñºÔ∏è –°–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚Ä¢ üí° –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ ‚úèÔ∏è –£–ª—É—á—à–∞—Ç—å –∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç—ã

üéÅ *–ë–µ—Å–ø–ª–∞—Ç–Ω–æ:* 3 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å
‚≠ê *–ü—Ä–µ–º–∏—É–º:* –±–µ–∑–ª–∏–º–∏—Ç + GPT-4 + DALL-E 3

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
"""
    
    await update.message.reply_text(welcome_text, reply_markup=reply_markup, parse_mode='Markdown')

async def help_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /help - –ø–æ–º–æ—â—å –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"""
    help_text = """
üìö *–ü–æ–º–æ—â—å –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏*

*–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*
/start - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
/profile - –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/premium - –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞
/ref - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞ (–∞–¥–º–∏–Ω)

*–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞:*
/text [—Ç–µ–º–∞] - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
/image [–æ–ø–∏—Å–∞–Ω–∏–µ] - –°–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
/rewrite [—Ç–µ–∫—Å—Ç] - –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å/—É–ª—É—á—à–∏—Ç—å —Ç–µ–∫—Å—Ç
/ideas [—Ç–µ–º–∞] - –ò–¥–µ–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

*–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:*
/text —Å—Ç–∞—Ç—å—è –ø—Ä–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç
/image –∫–æ—Ç –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–º –∫–æ—Å—Ç—é–º–µ
/rewrite —É–ª—É—á—à–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç: [–≤–∞—à —Ç–µ–∫—Å—Ç]
/ideas –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è IT-–±–ª–æ–≥–∞

üéØ *–ë–µ—Å–ø–ª–∞—Ç–Ω–æ:* 3 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å
üíé *–ü—Ä–µ–º–∏—É–º:* /premium - –±–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø
"""
    await update.message.reply_text(help_text, parse_mode='Markdown')

async def profile_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /profile - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user = update.effective_user
    
    # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–∑–∂–µ –ø–æ–¥–∫–ª—é—á–∏–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö)
    profile_text = f"""
üë§ *–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å*

*ID:* {user.id}
*–ò–º—è:* {user.first_name}
*Username:* @{user.username if user.username else '–Ω–µ —É–∫–∞–∑–∞–Ω'}

üìä *–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:*
‚Ä¢ –ó–∞–ø—Ä–æ—Å–æ–≤ —Å–µ–≥–æ–¥–Ω—è: 0/3
‚Ä¢ –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 0
‚Ä¢ –°—Ç–∞—Ç—É—Å: üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π

üíé *–ü—Ä–µ–º–∏—É–º:* –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
üéÅ *–†–µ—Ñ–µ—Ä–∞–ª—ã:* 0

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /premium –¥–ª—è –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø–∞!
"""
    await update.message.reply_text(profile_text, parse_mode='Markdown')

async def premium_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /premium - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–µ"""
    premium_text = """
üíé *–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ ContentMaster AI*

*–ß—Ç–æ –¥–∞–µ—Ç Premium:*
‚úÖ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Ç–µ–∫—Å—Ç + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
‚úÖ –î–æ—Å—Ç—É–ø –∫ GPT-4 –∏ DALL-E 3
‚úÖ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å
‚úÖ –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚úÖ –õ–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

üí∞ *–¢–∞—Ä–∏—Ñ—ã:*
‚Ä¢ 1 –º–µ—Å—è—Ü - 299‚ÇΩ
‚Ä¢ 3 –º–µ—Å—è—Ü–∞ - 799‚ÇΩ (—ç–∫–æ–Ω–æ–º–∏—è 100‚ÇΩ)
‚Ä¢ 12 –º–µ—Å—è—Ü–µ–≤ - 2499‚ÇΩ (—ç–∫–æ–Ω–æ–º–∏—è 1000‚ÇΩ)

üéÅ *–ê–∫—Ç–∏–≤–∞—Ü–∏—è Premium:*
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–ø–ª–∞—Ç–∏—Ç—å"
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏
3. –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±
4. –ü—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —á–µ–∫–∞ @username

üìû *–ü–æ–¥–¥–µ—Ä–∂–∫–∞:* @username
"""
    keyboard = [[InlineKeyboardButton("üí≥ –û–ø–ª–∞—Ç–∏—Ç—å Premium", callback_data="pay_premium")]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await update.message.reply_text(premium_text, reply_markup=reply_markup, parse_mode='Markdown')

async def ref_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /ref - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"""
    ref_text = f"""
üéÅ *–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞*

–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –±–æ–Ω—É—Å—ã!

*–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:*
`https://t.me/your_bot_username?start=ref{update.effective_user.id}`

*–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:*
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–∑—å—è–º –≤–∞—à—É —Å—Å—ã–ª–∫—É
2. –ö–∞–∂–¥—ã–π –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–π –¥—Ä—É–≥ –ø–æ–ª—É—á–∞–µ—Ç +1 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
3. –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ +2 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞
4. –ö–æ–≥–¥–∞ —É –≤–∞—Å –±—É–¥–µ—Ç 10 –¥—Ä—É–∑–µ–π - –º–µ—Å—è—Ü Premium –≤ –ø–æ–¥–∞—Ä–æ–∫!

*–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:*
‚Ä¢ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π: 0
‚Ä¢ –ü–æ–ª—É—á–µ–Ω–æ –±–æ–Ω—É—Å–æ–≤: 0 –∑–∞–ø—Ä–æ—Å–æ–≤
‚Ä¢ –î–æ Premium –æ—Å—Ç–∞–ª–æ—Å—å: 10 –¥—Ä—É–∑–µ–π

üì¢ *–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã!*
"""
    await update.message.reply_text(ref_text, parse_mode='Markdown')

async def text_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /text - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞"""
    if context.args:
        topic = ' '.join(context.args)
        response = f"üìù *–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞*\n\n–¢–µ–º–∞: *{topic}*\n\n–¢–µ–∫—Å—Ç –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!"
    else:
        response = "üìù *–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*\n`/text [—Ç–µ–º–∞]`\n\n*–ü—Ä–∏–º–µ—Ä:*\n`/text —Å—Ç–∞—Ç—å—è –ø—Ä–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç`"
    
    await update.message.reply_text(response, parse_mode='Markdown')

async def image_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /image - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"""
    if context.args:
        description = ' '.join(context.args)
        response = f"üñºÔ∏è *–°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è*\n\n–û–ø–∏—Å–∞–Ω–∏–µ: *{description}*\n\n–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!"
    else:
        response = "üñºÔ∏è *–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*\n`/image [–æ–ø–∏—Å–∞–Ω–∏–µ]`\n\n*–ü—Ä–∏–º–µ—Ä:*\n`/image –∫–æ—Ç –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–º —Å–∫–∞—Ñ–∞–Ω–¥—Ä–µ`"
    
    await update.message.reply_text(response, parse_mode='Markdown')

async def rewrite_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /rewrite - —É–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞"""
    if context.args:
        text = ' '.join(context.args)
        response = f"‚úèÔ∏è *–£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞*\n\n–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: *{text[:100]}...*\n\n–£–ª—É—á—à–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ —Å–∫–æ—Ä–æ!"
    else:
        response = "‚úèÔ∏è *–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*\n`/rewrite [–≤–∞—à —Ç–µ–∫—Å—Ç]`\n\n*–ü—Ä–∏–º–µ—Ä:*\n`/rewrite —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –∏ —Å–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º`"
    
    await update.message.reply_text(response, parse_mode='Markdown')

async def ideas_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /ideas - –∏–¥–µ–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞"""
    if context.args:
        topic = ' '.join(context.args)
        response = f"üí° *–ò–¥–µ–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞*\n\n–¢–µ–º–∞: *{topic}*\n\n–°–ø–∏—Å–æ–∫ –∏–¥–µ–π –±—É–¥–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω —Å–∫–æ—Ä–æ!"
    else:
        response = "üí° *–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:*\n`/ideas [—Ç–µ–º–∞]`\n\n*–ü—Ä–∏–º–µ—Ä:*\n`/ideas –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è Instagram –ø—Ä–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è`"
    
    await update.message.reply_text(response, parse_mode='Markdown')

async def stats_command(update: Update, context: CallbackContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /stats - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞ (–¥–ª—è –∞–¥–º–∏–Ω–∞)"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–¥–º–∏–Ω –ª–∏ (–∑–¥–µ—Å—å –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É)
    user_id = update.effective_user.id
    
    # –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    stats_text = f"""
üìä *–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞*

üë• *–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:*
‚Ä¢ –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 1
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ —Å—É—Ç–∫–∏: 1
‚Ä¢ –ù–æ–≤—ã—Ö –∑–∞ —Å—É—Ç–∫–∏: 1

üìà *–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:*
‚Ä¢ –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 0
‚Ä¢ –¢–µ–∫—Å—Ç–æ–≤—ã—Ö: 0
‚Ä¢ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 0

üí∞ *–§–∏–Ω–∞–Ω—Å—ã:*
‚Ä¢ –ü—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 0
‚Ä¢ –í—ã—Ä—É—á–∫–∞: 0‚ÇΩ

üîÑ *–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:* —Å–µ–π—á–∞—Å

üë§ *–í–∞—à ID:* {user_id}
"""
    await update.message.reply_text(stats_text, parse_mode='Markdown')
